(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-504f4360"],{"1a19":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{style:{height:"100%"},attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"关键字查询："}},[a("a-input",{attrs:{autocomplete:"on",name:"keyword",placeholder:"请输入关键字"},model:{value:e.filterData.key,callback:function(t){e.$set(e.filterData,"key",t)},expression:"filterData.key"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.search("search")}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"15px"},on:{click:function(t){return e.search("clear")}}},[e._v("重置")])],1)],1),a("a-row",{staticStyle:{display:"flex"},attrs:{gutter:24}},[a("a-col",[a("a-button",{directives:[{name:"action",rawName:"v-action:user_add",arg:"user_add"}],attrs:{type:"primary"},on:{click:e.showAddWorkflow}},[e._v("新建工作流")])],1)],1)],1)],1),a("div",{staticClass:"table-operator"}),a("a-table",{ref:"table",attrs:{columns:e.columns,dataSource:e.tableData,rowKey:"id",scroll:{x:1500},pagination:e.pagination},on:{change:e.pageChange},scopedSlots:e._u([{key:"operationType",fn:function(t,n){return a("span",{},e._l(e.getRange(n.range_apply),(function(t){return a("a-tag",{key:t.value,staticStyle:{margin:"2px"},attrs:{size:"small",color:"blue"}},[e._v(" "+e._s(t.label)+" ")])})),1)}},{key:"plan_type",fn:function(t,n){return a("span",{},[e._v(" "+e._s(e.getPlan_type(n.range_apply))+" ")])}},{key:"subjectType",fn:function(t,n){return a("span",{},e._l(e.getType(n.range_apply),(function(t){return a("a-tag",{key:t.module,staticStyle:{margin:"2px"},attrs:{size:"small",color:"blue"}},[e._v(" "+e._s(t.name)+" ")])})),1)}},{key:"is_deployed",fn:function(t,n){return a("span",{},[a("a-switch",{on:{change:function(t){return e.switkClickChange(n)}},model:{value:n.is_deployed,callback:function(t){e.$set(n,"is_deployed",t)},expression:"record.is_deployed"}})],1)}},{key:"module_default",fn:function(t,n){return a("span",{},[a("a-switch",{attrs:{disabled:n.module_default},on:{change:function(t){return e.changeDefault(n)}},model:{value:n.module_default,callback:function(t){e.$set(n,"module_default",t)},expression:"record.module_default"}})],1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.editBasics(n,e.url.edit_type=0)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action:user_ed",arg:"user_ed"}],on:{click:function(t){return e.editCustom(n,e.url.edit_type=1)}}},[e._v("流程编辑")]),a("a-divider",{attrs:{type:"vertical"}}),!1===n.deployed&&n.deploy_version>1?a("a",{directives:[{name:"action",rawName:"v-action:user_getRole",arg:"user_getRole"}],on:{click:function(t){return e.cancelClick(n)}}},[e._v("撤销")]):a("a",{directives:[{name:"action",rawName:"v-action:user_getRole",arg:"user_getRole"}],on:{click:function(t){return e.deleteWorkflowData(n)}}},[e._v("删除")])],1)}}])}),a("a-modal",{staticStyle:{top:"10px"},attrs:{width:600,visible:e.isAddWorkflow,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0,footer:null,"after-close":e.clearData},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{colon:!1,form:e.form}},[a("a-card",{attrs:{title:e.isEditManage?"编辑工作流":"新增工作流",bordered:!1}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称！"}]}],expression:"['name', {rules: [{ required: true, message: '请输入名称！' }]}]"}],attrs:{autocomplete:"off",placeholder:"请输入名称"}})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{label:"计划类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["plan_type_id",{rules:[{required:!0,message:"请选择计划类型！"}]}],expression:"['plan_type_id', {rules: [{required: true, message: '请选择计划类型！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择计划类型",disabled:e.isEditManage},on:{change:e.changePlanType}},e._l(e.planTypeList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{label:"课题类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["subjectType",{rules:[{required:!0,message:"请选择课题类型！"}]}],expression:"['subjectType', {rules: [{required: true, message: '请选择课题类型！'}]}]"}],staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择课题类型",disabled:!e.planTypeValue},on:{change:e.changeSubjectTypes}},e._l(e.subjectTypesList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{label:"应用范围"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["operationType",{rules:[{required:!0,message:"请选择应用范围！"}]}],expression:"['operationType', {rules: [{required: true, message: '请选择应用范围！'}]}]"}],staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择应用范围"}},e._l(e.typeList,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[e.isEditManage?e._e():a("a-form-item",{attrs:{label:"新增方式"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["addMethods",{rules:[{required:!0,message:"请选择新增方式！"}]}],expression:"['addMethods', {rules: [{required: true, message: '请选择新增方式！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择新增方式"},on:{change:e.changeAddMethods}},e._l(e.methodsList,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[e.isCopyOther?a("a-form-item",{attrs:{label:"选择工作流"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["changeWorkflow",{rules:[{required:!0,message:"请选择选择工作流！"}]}],expression:"['changeWorkflow', {rules: [{required: true, message: '请选择选择工作流！'}]}]"}],staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择选择工作流"}},e._l(e.tableDataAll,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e()],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24,align:"center"}},[a("a-button",{directives:[{name:"debounce",rawName:"v-debounce",value:function(){e.addWorkflow("addWorkflowForm")},expression:"()=>{addWorkflow('addWorkflowForm')}"}],attrs:{type:"primary"}},[e._v("确 定")]),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:e.handleCancel}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)},i=[],r=(a("4de4"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),o=a("f36f"),s=(a("99af"),a("5530"),a("b775")),l=(a("83b9"),a("4328"),{config:{configShow:"apply-original/config/show"},subject:{apply:"/apply-original/list/person-in-charge",reviewInfo:"/apply-original/review/apply/info",plantype:"/dictionary/plantype",getAllData:"/apply/config/list",getFormalShow:"/project/formal/show",filed:"/apply/filed"},funds:{getFundsTab:"/apply-original/getFundsTab",getFundsIds:"/apply-original/getFunds",getTotalFundsIds:"/apply-original/getTotalFunds",saveFunds:"/apply-original/funds",addDept:"apply-original/dept",delDept:"apply-original/dept"},project:{report:"/apply-original/report",review:"/apply-original/review",formalReview:"/apply-original/formal-review",subjecttype:"/dictionary/plantype/subjecttype",goback:"/apply-original/profession/goback",record:"/apply-original/process-record",profession:"/system/dept/profession",applyProfession:"/apply-original/profession",engineer:"/apply-original/profession/engineer",rejection:"/apply-original/review/rejection/option",download:"/process-record/download/",template:"/apply/template",templateConfig:"/apply-original/template/content",submit:"apply-original/submit",delete:"apply-original/deleteProject",proReview:"/apply-original/pro-review",detail:{getApplyInfo:"/apply-original/getApplyInfo",updateProject:"/apply-original/updateProject",updateFieldValue:"/apply-original/updateFieldValue",getResearcher:"/apply-original/researcher",importResearcher:"/apply-original/researcher/import",downloadResearcherTemplate:"/apply/researcher/template/download",ip:"/apply-original/ip",getDocument:"/apply/getDocument",deleteDocument:"/document/delete2",editDocument:"/document/edit",addDocument:"/document/add",getApplyOriginInfo:"/apply-original/getApplyInfo"}}});function c(){return s["b"].get(l.subject.plantype)}function d(e){return s["b"].get(l.project.subjecttype,{params:{planTypeId:e}})}var p=a("2b0e"),u={name:"UserList",components:{},data:function(){var e=this;return{tableData:[],tableDataAll:[],columns:[{title:"序号",width:40,align:"center",customRender:function(t,a,n){return(e.pagination.current-1)*e.pagination.pageSize+(n+1)}},{title:"名称",width:160,dataIndex:"name",key:"name"},{title:"计划类型",width:180,dataIndex:"plan_type",scopedSlots:{customRender:"plan_type"}},{title:"课题类型",width:200,dataIndex:"subjectType",scopedSlots:{customRender:"subjectType"}},{title:"应用范围",width:200,dataIndex:"operationType",scopedSlots:{customRender:"operationType"}},{title:"发布状态",width:60,dataIndex:"is_deployed",scopedSlots:{customRender:"is_deployed"}},{title:"默认",width:60,dataIndex:"module_default",scopedSlots:{customRender:"module_default"}},{title:"操作",align:"left",width:120,scopedSlots:{customRender:"action"}}],url:{edit_type:"",model_condition_update:"",deployed:"",model_list:"",model_condition_details:""},workflowId:"",rowListId:"",isAddWorkflow:!1,confirmLoading:!1,form:this.$form.createForm(this,{}),planTypeValue:"",subjectTypesValue:[],planTypeList:[],subjectTypesList:[],typeList:[{value:"apply",label:"立项模块"},{value:"contract",label:"合同(任务书)模块"},{value:"process",label:"实施模块"},{value:"alter",label:"变更模块"},{value:"acceptance",label:"验收模块"}],methodsList:[{value:"自定义",label:"自定义"},{value:"从其他工作流中导入新增",label:"从其他工作流中导入新增"}],isCopyOther:!1,filterData:{pageSize:1,pageNum:10,key:""},pagination:{showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],pageSize:10,current:1,total:100},editWorkflowData:{operationType:"",name:""},userInfo:{},cluster_id:"",isEditManage:!1,editId:"",grant_id:"",tenant_id:""}},created:function(){this.userInfo=this.$ls.get("USER_INFO"),this.grant_id=this.userInfo.id,this.tenant_id=this.userInfo.subSystemId,this.getPlanType(),"admin"!==this.userInfo.id&&(this.columns=this.columns.filter((function(e){return"module_default"!==e.dataIndex})))},methods:{pageChange:function(e,t,a,n){n.currentDataSource;this.pagination=e,this.getModelList()},getRange:function(e){var t=JSON.parse(e),a=this.typeList.filter((function(e){return t.module.indexOf(e.value)>-1}));return a},getPlan_type:function(e){var t=JSON.parse(e)["subject_plan"];return t.name},search:function(e){"clear"==e&&(this.filterData.key="",this.pagination.pageSize=10,this.pagination.current=1),this.pagination.current=1,this.getModelList()},getModelList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={tenant_id:e.tenant_id,grant_id:e.grant_id,conditions:{key:e.filterData.key},page_num:e.pagination.current,page_size:e.pagination.pageSize},t.next=4,Object(o["g"])(a);case 4:n=t.sent,1e4===n.code&&n.data?(1e4===n.code?(i=n.data.list,i&&i.forEach((function(e){e.range_apply=e.range_apply.replace("subject_type","subjectType")})),e.tableData=i,e.pagination.total=n.data.total):(e.tableData=[],e.pagination.total=0,e.$notification.warning({message:"提示",description:n.msg})),e.loading=!1):e.$notification.warning({message:"提示",description:n.msg}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getModelList_all:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={tenant_id:e.tenant_id,grant_id:e.grant_id,page_num:1,page_size:1e3},e.tableDataAll=[],t.next=5,Object(o["g"])(a);case 5:n=t.sent,1e4===n.code&&n.data&&1e4===n.code?(i=n.data.list,i&&i.forEach((function(e){e.range_apply=e.range_apply.replace("subject_type","subjectType")})),e.tableDataAll=i):e.$notification.warning({message:"提示",description:n.msg}),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getType:function(e){var t=JSON.parse(e)["subjectType"];return t},getdwId:function(e){var t=JSON.parse(e);return t.tenant_id.name},switkClickChange:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=13;break}return n="",!0===e.is_deployed?n="发布":!1===e.is_deployed&&(n="挂起"),i={id:e.id,metadata_id:e.metadata_id,name:e.name,operation:n,tenant_id:t.tenant_id,cluster_id:e.cluster_id},a.prev=4,a.next=7,Object(o["r"])({grant_id:t.grant_id,tenant_id:t.tenant_id},i);case 7:r=a.sent,1e4===r.code?(t.getModelList(),t.$notification.success({message:"提示",description:r.msg})):(t.$notification.warning({message:"提示",description:r.msg}),t.getModelList()),a.next=13;break;case 11:a.prev=11,a.t0=a["catch"](4);case 13:case"end":return a.stop()}}),a,null,[[4,11]])})))()},changeDefault:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,n=JSON.parse(e.range_apply).module,!(n.indexOf("##")>-1)){a.next=6;break}return t.$notification.warning({message:"提示",description:"应用范围只有为单一的时候，才可以设置默认"}),t.getModelList(),a.abrupt("return");case 6:return i=n.replace(/#/g,""),a.next=9,Object(o["c"])({id:e.id,module:i});case 9:r=a.sent,1e4===r.code?t.getModelList():(t.getModelList(),t.$notification.warning({message:"提示",description:r.msg})),a.next=15;break;case 13:a.prev=13,a.t0=a["catch"](0);case 15:case"end":return a.stop()}}),a,null,[[0,13]])})))()},editCustom:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.edit_type=t,a.editWorkflowData.name=e.name,a.metadata_id=e.metadata_id,a.type=e.type,a.editId=e.id,i=[],e.range_delete&&i.push("删除"),e.range_edit&&i.push("编辑"),e.range_insert&&i.push("新增"),a.$set(a.editWorkflowData,"arr",i),localStorage.setItem("main_id",a.editId),localStorage.setItem("metadata_id",a.metadata_id),localStorage.setItem("metadata_type",a.type),r=JSON.parse(e.range_apply),localStorage.getItem("main_id")&&a.$router.push({path:"editWorkFlow",query:{id:a.editId,type:a.type,metadata_id:a.metadata_id,name:a.editWorkflowData.name,tenant_id:e.tenant_id,model_id:e.id,module:r.module.replace(/#/g,""),planId:r.subject_plan.id}}),a.isEditManage=!1;case 16:case"end":return n.stop()}}),n)})))()},deleteWorkflowData:function(e){this.workflowId=e.id;var t=this;this.$confirm({title:"警告",content:"此操作将永久删除该流程, 是否继续?",onOk:function(){t.delWorkflow()},onCancel:function(){}})},delWorkflow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.workflowId,n={id:a},t.prev=2,i={tenant_id:e.tenant_id,grant_id:e.grant_id},t.next=6,Object(o["e"])(i,n);case 6:r=t.sent,1e4===r.code?(e.getModelList({page_num:e.currentPage,page_size:e.pagesize}),e.$notification.success({message:r.msg,duration:4})):e.$notification.warning({message:"提示",description:r.msg}),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})))()},cancelClick:function(e){this.rowListId=e.id;var t=this;this.$confirm({title:"撤销",content:"此操作将回滚版本, 是否继续?",onOk:function(){t.cancelWorkflow()},onCancel:function(){}})},cancelWorkflow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={app_id:0,cluster_id:0,conditions:"",create_time:0,creator:0,deleted:!0,deploy_time:0,deploy_version:0,deployed:!0,description:"",edit_time:0,editor:0,form_name:"",history:!0,id:e.rowListId,is_deployed:"",metadata_id:0,name:"",operation:"",process_key:"",range_delete:!0,range_edit:!0,range_insert:!0,tenant_id:0,tree_id:0,type:""},t.prev=1,n={tenant_id:e.tenant_id,grant_id:e.grant_id},t.next=5,Object(o["b"])(n,a);case 5:i=t.sent,1e4===i.code?(e.getModelList(),e.$notification.success({message:"撤销成功",duration:4})):e.$notification.warning({message:i.msg,duration:4}),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:case"end":return t.stop()}}),t,null,[[1,9]])})))()},showAddWorkflow:function(){this.isAddWorkflow=!0,this.isEditManage=!1,this.getPlanType()},handleCancel:function(){this.isAddWorkflow=!1,this.planTypeValue="",this.subjectTypesValue=[],this.isCopyOther=!1},addWorkflow:function(e){var t=this,a=this;this.form.validateFields(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n,i){var r,s,l,c,d,p,u,g,m,f,y,_,h,b,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=64;break}if(r=[],t.subjectTypesList.forEach((function(e){i.subjectType.indexOf(e.id)>-1&&r.push({id:e.id,name:e.name})})),s=r,l=t.planTypeList.filter((function(e){return e.id==i.plan_type_id}))[0],c={id:l.id,name:l.name},d="",d=i.operationType.map((function(e){return"#"+e+"#"})).join(""),p=JSON.stringify({module:d,subject_plan:c,subject_type:s}),u={creator:0,description:"",editor:0,id:"0",name:i.name,range_delete:!0,range_edit:!0,range_insert:!0,type:"form",cluster_id:0,range_apply:p,plan_type_id:i.plan_type_id},t.confirmLoading=!0,!t.isEditManage){e.next=44;break}return g=t,m={creator:0,description:"",editor:0,id:t.editId,name:i.name,range_delete:!0,range_edit:!0,range_insert:!0,type:"form",cluster_id:t.cluster_id,range_apply:p,plan_type_id:i.plan_type_id},e.prev=14,e.next=17,Object(o["a"])({grant_id:t.grant_id,tenant_id:t.tenant_id},m);case 17:if(f=e.sent,y={},_={},1e4!==f.code){e.next=34;break}return e.next=23,Object(o["h"])({model_id:t.editId});case 23:if(y=e.sent,1e4!==y.code){e.next=31;break}return h={id:t.editId,name:y.data.process_form_name,edit_type:1,resource:y.data.resource},b={tenant_id:t.tenant_id,grant_id:t.grant_id},e.next=29,Object(o["o"])(b,h);case 29:_=e.sent,1e4===_.code&&(t.$notification.success({message:"编辑成功",description:"请重新发布，否则工作流仍然调用修改前的版本"}),g.isAddWorkflow=!1,g.isEditManage=!1);case 31:t.getModelList(),e.next=35;break;case 34:t.$notification.warning({message:"提示",description:f.msg});case 35:1e4===y.code&&1e4===_.code||t.$notification.warning({message:"提示",description:"保存失败，请联系管理员"}),t.confirmLoading=!1,e.next=42;break;case 39:e.prev=39,e.t0=e["catch"](14),t.confirmLoading=!1;case 42:e.next=62;break;case 44:return e.prev=44,e.next=47,Object(o["a"])({grant_id:t.grant_id,tenant_id:t.tenant_id},u);case 47:if(w=e.sent,1e4!==w.code){e.next=53;break}i.changeWorkflow?t.$router.push({path:"editWorkFlow",query:{id:w.data.id,type:w.data.type,metadata_id:w.data.metadata_id,name:i.name,model_id:i.changeWorkflow,getWorkflow:!0,planId:l.id}}):t.$router.push({path:"editWorkFlow",query:{type:w.data.type,id:w.data.id,name:i.name,model_id:w.data.id,planId:l.id}}),a.isAddWorkflow=!1,e.next=56;break;case 53:return t.$notification.warning({message:"提示",description:w.msg}),t.confirmLoading=!1,e.abrupt("return",!1);case 56:t.confirmLoading=!1,e.next=62;break;case 59:e.prev=59,e.t1=e["catch"](44),t.confirmLoading=!1;case 62:e.next=65;break;case 64:return e.abrupt("return",!1);case 65:case"end":return e.stop()}}),e,null,[[14,39],[44,59]])})));return function(t,a){return e.apply(this,arguments)}}())},getPlanType:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c();case 3:a=t.sent,a&&a.success?e.planTypeList=a.data:e.$notification.warning({message:a.msg,duration:4}),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},changePlanType:function(e){this.planTypeValue=e,this.getSubjectTypes(e),this.form.setFieldsValue({subjectType:[]}),this.subjectTypesValue=[]},getSubjectTypes:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d(e);case 3:i=n.sent,i&&i.success?(a.subjectTypesList=i.data,t&&t("success")):(a.$notification.warning({message:i.msg,duration:4}),t&&t("fail")),n.next=9;break;case 7:n.prev=7,n.t0=n["catch"](0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()},changeSubjectTypes:function(e){this.subjectTypesValue=e},changeAddMethods:function(e){this.isCopyOther="从其他工作流中导入新增"===e,this.isCopyOther&&this.getModelList_all()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>-1},editBasics:function(e,t){var a=this;this.isAddWorkflow=!0,this.isEditManage=!0;var n=JSON.parse(e.range_apply);n.module=n.module.replace(/(^\#)|(\#$)/g,""),n.subject_plan_id=n.subject_plan.id,n.subjectType=n.subjectType.map((function(e){return e.id})),this.planTypeValue=n.subject_plan_id,this.getSubjectTypes(n.subject_plan_id,(function(e){a.$nextTick((function(){"success"==e?a.form.setFieldsValue({subjectType:n.subjectType}):a.form.setFieldsValue({subjectType:[]})}))}));var i={name:e.name,plan_type_id:n.subject_plan_id,operationType:n.module.split("##")};this.$nextTick((function(){a.form.setFieldsValue(i)})),this.editWorkflowData=e,this.edit_type=t,this.editWorkflowData.name=e.name,this.editId=e.id,this.cluster_id=e.cluster_id;var r=[];e.range_delete&&r.push("删除"),e.range_edit&&r.push("编辑"),e.range_insert&&r.push("新增"),this.$set(this.editWorkflowData,"arr",r)},cancelEditworkflow:function(){this.isEditManage=!1},clearData:function(){this.confirmLoading=!1}},mounted:function(){this.getModelList(),this.userId=p["a"].ls.get("USER_INFO").id}},g=u,m=(a("8b2d"),a("2877")),f=Object(m["a"])(g,n,i,!1,null,"e98ee762",null);t["default"]=f.exports},"8b2d":function(e,t,a){"use strict";var n=a("b05b"),i=a.n(n);i.a},b05b:function(e,t,a){}}]);