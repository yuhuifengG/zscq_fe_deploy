(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-943fd194"],{"4de6":function(e,a,t){"use strict";var i=t("edfc"),r=t.n(i);r.a},"74d5":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-form",{attrs:{colon:!1,form:e.form}},[t("a-card",{attrs:{title:"单位信息",bordered:!1}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.initData.name,rules:[{required:!0,message:"请输入单位名称！"}]}],expression:"['name', { initialValue: initData.name, rules: [{ required: true, message: '请输入单位名称！' }] }]"}],attrs:{placeholder:"请输入单位名称"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位简称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["shortName",{initialValue:e.initData.shortName,rules:[{required:!0,message:"请输入单位简称！"}]}],expression:"['shortName', {initialValue: initData.shortName, rules: [{required: true, message: '请输入单位简称！'}]}]"}],attrs:{placeholder:"请输入单位简称"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"组织机构代码/统一社会信用代码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["creditCode",{initialValue:e.initData.creditCode,rules:[{required:e.requiredField,message:"请输入组织机构代码/统一社会信用代码！"}]}],expression:"['creditCode', {initialValue: initData.creditCode, rules: [{required: requiredField, message: '请输入组织机构代码/统一社会信用代码！'}]}]"}],attrs:{placeholder:"请输入组织机构代码/统一社会信用代码"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位地址"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{initialValue:e.initData.address,rules:[{required:e.requiredField,message:"请输入单位地址！"}]}],expression:"['address', {initialValue: initData.address, rules: [{required: requiredField, message: '请输入单位地址！'}]}]"}],attrs:{placeholder:"请输入单位地址"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"法定代表人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["legalPerson",{initialValue:e.initData.legalPerson,rules:[{required:e.requiredField,message:"请输入法定代表人！"}]}],expression:"['legalPerson', {initialValue: initData.legalPerson, rules: [{required: requiredField, message: '请输入法定代表人！'}]}]"}],attrs:{placeholder:"请输入法定代表人"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位成立时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["establishTime",{initialValue:e.initData.establishTime,normalize:e.parseDateValue,rules:[{required:e.requiredField,message:"请输入单位成立时间！"}]}],expression:"['establishTime', {\n                initialValue: initData.establishTime,\n                normalize:parseDateValue,\n                rules: [\n                  {required: requiredField, message: '请输入单位成立时间！'}\n                ]\n              }]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:"请输入单位成立时间"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"注册资金（万元）"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["registeredFund",{initialValue:e.initData.registeredFund,rules:[{required:this.requiredField,message:"请输入注册资金！"},{pattern:"^\\d+$",message:"注册资金必须为数字！"}]}],expression:"['registeredFund', {\n                initialValue: initData.registeredFund,\n                rules: [\n                  { required: this.requiredField, message: '请输入注册资金！' },\n                  { pattern: '^\\\\d+$', message: '注册资金必须为数字！' }\n                ]\n              }]"}],attrs:{placeholder:"请输入注册资金（万元）"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"是否为独立法人单位"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unitLegalFlag",{initialValue:e.initData.unitLegalFlag,rules:[{required:e.requiredField,message:"请选择是否为独立法人单位！"}]}],expression:"['unitLegalFlag', {initialValue: initData.unitLegalFlag, rules: [{required: requiredField, message: '请选择是否为独立法人单位！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否为独立法人单位"},on:{change:e.flagChange}},[t("a-select-option",{attrs:{value:"1"}},[e._v("是")]),t("a-select-option",{attrs:{value:"0"}},[e._v("否")])],1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位性质"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["nature",{initialValue:{label:e.initData.natureName},rules:[{required:e.requiredField,message:"请选择单位性质"}]}],expression:"['nature', {initialValue:{label:initData.natureName},rules: [{required: requiredField, message: '请选择单位性质'}]}]"}],staticStyle:{width:"100%"},attrs:{"label-in-value":"",placeholder:"请选择单位性质"},on:{change:e.natureChange}},e._l(e.natureData,(function(a,i){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"联系人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkPerson",{initialValue:e.initData.linkPerson,rules:[{required:e.requiredField,message:"请输入联系人！"}]}],expression:"['linkPerson', {initialValue: initData.linkPerson, rules: [{required: requiredField, message: '请输入联系人！'}]}]"}],attrs:{placeholder:"请输入联系人"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"联系人电话"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkTel",{initialValue:e.initData.linkTel,rules:[{required:!0,message:"请输入联系人电话！"}]}],expression:"['linkTel',{initialValue: initData.linkTel, rules: [{required: true, message: '请输入联系人电话！'}]}]"}],attrs:{placeholder:"请输入联系人电话"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"联系人手机"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkMobile",{initialValue:e.initData.linkMobile,rules:[{required:this.requiredField,message:"请输入联系人手机！"},{pattern:"^[1][3,4,5,6,7,8,9][0-9]{9}$",message:"联系人手机必须为11位数字！"}],validateTrigger:"blur"}],expression:"['linkMobile', {\n                initialValue: initData.linkMobile,\n                rules: [\n                  { required: this.requiredField, message: '请输入联系人手机！' },\n                  { pattern: '^[1][3,4,5,6,7,8,9][0-9]{9}$', message: '联系人手机必须为11位数字！' }\n                ], validateTrigger: 'blur'\n              }]"}],attrs:{placeholder:"请输入联系人手机"}})],1)],1)],1)],1),t("a-card",{attrs:{title:"财务信息",bordered:!1}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位开户银行"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bankDeposit",{initialValue:e.initData.bankDeposit,rules:[{required:e.requiredField,message:"请输入单位开户银行！"}]}],expression:"['bankDeposit', {initialValue: initData.bankDeposit, rules: [{required: requiredField, message: '请输入单位开户银行！'}]}]"}],attrs:{placeholder:"请输入单位开户银行"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"单位开户名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bankName",{initialValue:e.initData.bankName,rules:[{required:e.requiredField2,message:"请输入单位开户名！"}]}],expression:"['bankName', {initialValue: initData.bankName, rules: [{required: requiredField2, message: '请输入单位开户名！'}]}]"}],attrs:{placeholder:"请输入单位开户名"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"银行账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bankAccount",{initialValue:e.initData.bankAccount,rules:[{required:this.requiredField,message:"请输入银行账号！"},{pattern:"^[0-9-]+$",message:"银行账号格式错误"}]}],expression:"['bankAccount', {\n                initialValue: initData.bankAccount,\n                rules: [\n                  { required: this.requiredField, message: '请输入银行账号！' },\n                  { pattern: '^[0-9-]+$', message: '银行账号格式错误' }\n                ]\n              }]"}],attrs:{placeholder:"请输入银行账号"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"能否开具增值税专用发票"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["vatSpecialInvoice",{initialValue:e.initData.vatSpecialInvoice,rules:[{required:e.requiredField,message:"请选择能否开具增值税专用发票！"}]}],expression:"['vatSpecialInvoice', {initialValue: initData.vatSpecialInvoice, rules: [{required: requiredField, message: '请选择能否开具增值税专用发票！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择能否开具增值税专用发票"}},[t("a-select-option",{attrs:{value:"1"}},[e._v("是")]),t("a-select-option",{attrs:{value:"0"}},[e._v("否")])],1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"值税专用发票税点"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["vatTaxPoint",{initialValue:e.initData.vatTaxPoint,rules:[{required:"1"===e.form.getFieldValue("vatSpecialInvoice"),message:"请选择值税专用发票税点！"}]}],expression:"['vatTaxPoint', {initialValue: initData.vatTaxPoint, rules: [{required: form.getFieldValue('vatSpecialInvoice')==='1', message: '请选择值税专用发票税点！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择值税专用发票税点"}},[t("a-select-option",{attrs:{value:"3"}},[e._v("3%")]),t("a-select-option",{attrs:{value:"6"}},[e._v("6%")]),t("a-select-option",{attrs:{value:"8"}},[e._v("8%")])],1)],1)],1),t("a-col",{attrs:{span:8}})],1)],1),t("a-card",{attrs:{title:"证明文件",bordered:!1}},[t("div",{staticClass:"info"},[e._v(" 证明文件包括：1.已签字盖章的注册登记表（填写信息必须与注册填报信息一致） 2.本单位营业执照(可注明仅用于铁路科技管理信息平台注册认证使用) "),t("br"),e._v("请将上述两件通过彩扫后合成一个PDF文件，系统仅能上传PDF格式的文件 ")]),t("a-form-item",{attrs:{label:""}},[t("div",{staticClass:"stretch-wrapper"},[t("a-upload-dragger",{directives:[{name:"decorator",rawName:"v-decorator",value:["multipartFile"],expression:"['multipartFile']"}],attrs:{name:"file",accept:e.updateAccept,multiple:!1,showUploadList:!1,customRequest:e.customRequest,"before-upload":e.onBeforeUpload},on:{change:e.uploadChange}},[t("div",[t("a-icon",{attrs:{type:"upload"}}),e._v("文件拖入此处上传 ")],1)])],1),e._l(e.fileList,(function(a,i){return t("div",{key:a.uid,staticClass:"upload-list"},[t("a-icon",{style:{color:"rgba(0, 0, 0, .45)",marginRight:"10px"},attrs:{type:"paper-clip"}}),t("span",{on:{click:function(a){return e.uploadOldFile(e.deptId)}}},[e._v(e._s(a.name))]),t("a-icon",{staticClass:"delete-icon",attrs:{type:"delete"},on:{click:function(a){return e.deleteUpload()}}})],1)}))],2)],1),t("a-row",[t("a-col",{attrs:{span:24,align:"center"}},[t("a-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleSubmit,expression:"handleSubmit"},{name:"action",rawName:"v-action:unit_save",arg:"unit_save"}],attrs:{type:"primary"}},[e._v("保存")])],1)],1)],1)],1)},r=[],l=(t("4160"),t("b64b"),t("159b"),t("8593")),n=t("0644"),s=t.n(n),o=t("c1df"),d=t.n(o),u=t("4b90"),c=t("ca00"),m={data:function(){return{requiredField:!0,requiredField2:!1,visible:!1,confirmLoading:!1,level:0,mode:null,form:this.$form.createForm(this,{}),initData:{},file:{},newFile:{},deptId:"",natureData:[],checkedNature:{},validatedFile:!1,fileList:[],allFile:[],updateAccept:".pdf",hasFileOri:null,hasFile:null}},created:function(){this.deptId=localStorage.getItem("deptId"),this.getData(),this.form.getFieldDecorator("id",{initialValue:void 0,preserve:!0})},methods:{flagChange:function(e){this.requiredField=1==e},customRequest:function(e){this.fileList=[e.file]},uploadChange:function(e){e.fileList.length||(this.fileList=[])},deleteUpload:function(){window.event.stopPropagation(),this.fileList=[],this.hasFile=!1},deleteFile:function(){this.hasFile=!1,this.allFile=[]},natureChange:function(e){this.checkedNature=e},add:function(e,a){if(this.visible=!0,this.mode=a,"addSub"===a){var t=parseInt(e.level);isNaN(t)&&(t=0)}else"edit"===a&&this.loadDept(e.id)},loadDept:function(e){var a=this;this.confirmLoading=!0,Object(l["F"])(e).then((function(e){var t=null===e||void 0===e?void 0:e.data;if(a.hasFileOri=!!t.docName,t){var i={id:t.id};Object.keys(a.form.getFieldsValue()).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])})),a.form.setFieldsValue(i)}a.confirmLoading=!1})).catch((function(e){a.$error({title:"查询失败",content:e.message}),a.confirmLoading=!1}))},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){t.id=e.deptId;var i=e.checkedNature;if(Object.keys(i).length>0&&(t.natureCode=i.key,t.natureName=i.label),a)e.$message.warning("页面验证失败，请检查填写是否正确"),e.confirmLoading=!1;else{var r=s()(t),n=r.establishTime;n&&(r.establishTime=n.format("YYYY-MM-DD")),delete r.nature;var o=new FormData;o.append("delMark",0),o.append("upId",e.initData.upId),Object.keys(r).forEach((function(a){var t=r[a];"multipartFile"===a?(t&&o.append(a,t.fileList[0].originFileObj),!0===e.hasFileOri&&!1===e.hasFile&&o.set("delMark",1)):t&&o.append(a,t)}));try{Object(l["ob"])(o).then((function(a){a&&a.success?(e.$notification.success({message:"保存成功",description:a.msg}),e.getData(),e.confirmLoading=!1):e.$notification.error({message:"保存失败",description:a.msg})}))}catch(d){e.$error({title:"保存失败",content:d.message}),e.confirmLoading=!1}}}))},parseDateValue:function(e){return e&&!d.a.isMoment(e)?d()(e):e},clearData:function(){this.level=0,this.mode=null},getData:function(){var e=this;Object(l["F"])(this.deptId).then((function(a){e.initData=a.data.deptInfo,e.requiredField="0"!==e.initData.unitLegalFlag,e.fileList=e.initData.docName?[{name:e.initData.docName}]:[],e.hasFileOri=!!e.initData.docName,e.initData.natureCode&&e.initData.natureName&&(e.checkedNature={key:e.initData.natureCode,label:e.initData.natureName})})).catch((function(e){})),Object(l["N"])().then((function(a){e.natureData=a.data})).catch((function(e){}))},beforeUpload:function(e){return e&&"application/pdf"==e.type?(this.validatedFile=!0,this.newFile=e,!1):(this.$notification.warn({message:"验证失败",description:"请上传PDF格式文件"}),!1)},uploadOldFile:function(e){if(this.initData.docName){var a=u["a"];window.open(a+"/system/dept/download?deptId="+e,"_blank")}},normFile:function(e){return this.newFile},onBeforeUpload:function(e){return!!Object(c["a"])(e,this.updateAccept)&&(this.hasFile=!0,!0)}}},p=m,v=(t("4de6"),t("2877")),g=Object(v["a"])(p,i,r,!1,null,"67b67cb2",null);a["default"]=g.exports},edfc:function(e,a,t){}}]);