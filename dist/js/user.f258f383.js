(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1037:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("result",{staticClass:"registerResult",attrs:{isSuccess:!0,content:!1,title:t.title,description:t.resultInfo}},[s("template",{slot:"description"},[s("div",[s("a-alert",{attrs:{message:" 参研单位账号默认为冻结状态，无需使用账号登录系统。注册成功后一个工作日内会审核，审核通过后承担单位即可添加本单位为参研单位。",type:"warning","show-icon":""}})],1)]),s("template",{slot:"action"},[s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:t.goHomeHandle}},[t._v("返回首页")])],1)],2)},i=[],n=s("2af9"),r={name:"RegisterResult",components:{Result:n["b"]},data:function(){return{description:"注册信息已保存，等待管理员审核，审核结果将通过短信方式发送至您注册手机",title:"注册申请填写完成，等待管理员进行审核",form:{}}},computed:{resultInfo:function(){this.$store.state.phone;var t="";return t}},created:function(){this.form=this.$route.params},methods:{goHomeHandle:function(){this.$router.push({name:"login"})}}},o=r,c=(s("367d"),s("2877")),l=Object(c["a"])(o,a,i,!1,null,"144bcd7a",null);e["default"]=l.exports},1232:function(t,e,s){},1793:function(t,e,s){},"21f4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContent"},[t._m(0),a("div",{staticClass:"slogan"},[t._v("交通强国 铁路先行")]),a("div",{staticClass:"main clearfix"},[a("div",{staticClass:"notice-card"},[a("div",{staticClass:"title"},[t._v(t._s("lz"==t.domainName?"兰州铁路局科研管理系统公告":"铁路局科研管理系统公告"))]),a("div",{staticClass:"content"},[a("a-card",{staticClass:"notice-card"},[a("div",{staticStyle:{"min-height":"500px"}},[t._l(t.pageNoticeList,(function(e,i){return a("p",{key:i,staticClass:"data-list clearfix"},[1==e.showNew?a("a-icon",{staticStyle:{color:"red",width:"20px"},attrs:{type:"vertical-align-top"}}):a("span",{staticClass:"dot-icon"},[t._v("▪")]),a("router-link",{attrs:{to:{path:"/"+t.domainName+"/user/noticeDetail",query:{id:e.id}},target:"_blank"}},[a("a-badge",[i<=1?a("img",{attrs:{slot:"count",src:s("653b")},slot:"count"}):t._e(),a("a",{staticClass:"noticeTit"},[t._v(t._s(t._f("ellipsis")(e.title)))])])],1),a("span",{staticClass:"notice-date"},[t._v(" "+t._s(null==e.createTime?"":t.moment(e.createTime).format("MM.DD HH:mm"))+" ")])],1)})),0===t.noticeList.length?a("a-empty",{attrs:{image:t.simpleImage}}):t._e()],2),0!==t.noticeList.length?a("a-pagination",{attrs:{pageSize:t.noticePageInfo.pageSize,total:t.noticeTotal,"show-less-items":""},on:{change:t.noticePageChange},model:{value:t.noticePageInfo.pageNum,callback:function(e){t.$set(t.noticePageInfo,"pageNum",e)},expression:"noticePageInfo.pageNum"}}):t._e()],1)],1)])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top"},[s("div",{staticClass:"header"},[s("a",{staticClass:"clearfix",staticStyle:{position:"relative",display:"block",margin:"10px"},attrs:{href:"/"}})])])}],n=(s("fb6a"),s("06f4"),s("fc25")),r=s("5530"),o=s("2b0e"),c=s("9fb0"),l=s("ac0d"),u=(s("6821"),s("2f62")),d=s("7ded"),m=s("6c3b"),g=s("de1b"),p=s("c1df"),f=s.n(p),h=s("0644"),b=s.n(h),y={mixins:[l["b"],l["c"]],components:{dialogModel:m["a"],APagination:g["a"]},data:function(){return{noticeList:[],pageNoticeList:[],visible:!1,showCard:!0,num:0,customActiveKey:"tab1",loginBtn:!1,loginType:1,isLoginError:!1,captchaImg:"",captchaId:"",domainName:this.$route.params.unit,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1},noticePageInfo:{pageNum:1,pageSize:10},noticeTotal:0}},computed:Object(r["a"])({},Object(u["d"])({menuList:function(t){return t.permission.routers}})),methods:Object(r["a"])({moment:f.a},Object(u["b"])(["Login","Logout"]),{seeMore:function(){this.$message.error("请先登录")},getNotice:function(){var t=this;Object(d["c"])(this.$route.params.unit).then((function(e){e&&e.success?(t.noticeList=b()(e.data),t.noticeTotal=e.data.length,t.pageNoticeList=t.noticeList.slice(0,t.noticePageInfo.pageSize)):t.$notification.error({message:e.msg,duration:4})})).catch()},noticePageChange:function(t,e){this.pageNoticeList=this.noticeList.slice((t-1)*e,t*e),this.noticePageInfo.pageNum=t}}),mounted:function(){o["a"].ls.get(c["m"])&&(this.num=o["a"].ls.get(c["m"])),this.getNotice(),this.num>0&&this.getCaptchaSms()},watch:{num:function(t){2===t&&this.getCaptchaSms()}},beforeCreate:function(){this.simpleImage=n["a"].PRESENTED_IMAGE_SIMPLE},filters:{ellipsis:function(t){return t?t.length>28?t.slice(0,28)+"...":t:""}}},v=y,w=(s("eedb"),s("2877")),C=Object(w["a"])(v,a,i,!1,null,"ac2849e6",null);e["default"]=C.exports},"367d":function(t,e,s){"use strict";var a=s("bc70"),i=s.n(a);i.a},"5c93":function(t,e,s){"use strict";var a=s("1793"),i=s.n(a);i.a},"653b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAALCAYAAABlNU3NAAAABHNCSVQICAgIfAhkiAAAAbJJREFUOI2lkj1ok1EYhZ9zvyQWFNKGKrq6iLE/IlQU/CuCgxCIg3NddBDX4ijiIq2dBRGK2sVBsEU6CZrNpaARRIqLIDqIrdFC05/7HYcmIUYr0h64cDn33uflHK7o0LfS4KGQxN2d/v/IDrHnU/aV5ubWmp6am++lgSMxYUzo7Fbgbfpopw8Ktbe39JJ1ASyW+8tGj0G5bcJbMn5SeFq9mPy80HcwOnmBlN044IvMLKKvcXcKGADfNcwCFdBO8HOhw7bfA68l7ceeMeQl7RIq1g/smQ+rDtcRmeZk4c89tdol4A2AzRSAU2aEbmwshmRPAEg8TJyOARA0DnS3YihcDqBznfEW8/kRO17FrDe9gFbAFXDFsGxC0TDv1B9ioiXjJUWykrpaNZmjGdl7kTpGuFdKRgy38d87FpwUPEPahylijVs+3vZvkLycQX/Qm7qSsY+liismQ4p3CJ1uwEGcyKX18/XQNQl054JLq9aj32DmXdgEDkAU97UWfgAkwV9FHBZxGLgH7jfZKHxG9lCjk1Pt74O4qYXy4CYlbFP2ncJ0dfSfCbZIXsDptcJ0dRTgF237qXPb6gj+AAAAAElFTkSuQmCC"},"6a88":function(t,e,s){"use strict";var a=s("1232"),i=s.n(a);i.a},"8df9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["user-layout-wrapper",t.device],attrs:{id:"userLayout"}},[s("div",{staticClass:"step-form-wrapper"},[s("h1",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.sysNotice.title))]),s("div",{staticStyle:{"text-align":"center","font-size":"16px","padding-bottom":"10px"}},[t._v("作者："+t._s(t.sysNotice.authorName))]),s("p",{staticStyle:{"padding-top":"10px","border-top":"1px solid #efefef"},domProps:{innerHTML:t._s(t.sysNotice.content)}}),s("div",{staticStyle:{"text-align":"left","font-size":"14px"}},[0!==t.doc.length?s("span",{staticStyle:{"font-weight":"bolder"}},[t._v("附件：")]):t._e(),t._l(t.doc,(function(e,a){return s("a",{class:"upload"+a,staticStyle:{display:"block","margin-left":"40px"},on:{click:function(s){return t.download(e.id)}}},[t._v(t._s(e.name))])}))],2)])])},i=[],n=(s("ac1f"),s("5319"),s("a417")),r=s("c1df"),o=s.n(r),c=s("ac0d"),l=s("4b90"),u={mixins:[c["c"]],data:function(){return{rowData:{},id:"",doc:[],sysNotice:{}}},methods:{getDetail:function(){var t=this;function e(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(t,s){return e[s]}))}Object(n["G"])(this.id).then((function(s){t.rowData=s.data,t.sysNotice=s.data.sysNotice,t.rowData.sysNotice.startTime=o()(t.rowData.sysNotice.startTime),t.rowData.sysNotice.endTime=o()(t.rowData.sysNotice.endTime),t.rowData.sysNotice.content=e(t.rowData.sysNotice.content),t.rowData.doc.length>0?t.doc=s.data.doc:t.doc=[]})).catch((function(){t.$message.error("公告已失效")}))},download:function(t){var e=l["a"];window.open(e+"/sysNotice/download?docId="+t,"_blank")}},mounted:function(){this.id=this.$route.query.id,this.getDetail()}},d=u,m=(s("6a88"),s("2877")),g=Object(m["a"])(d,a,i,!1,null,"f785abd8",null);e["default"]=g.exports},a417:function(t,e,s){"use strict";s.d(e,"n",(function(){return c})),s.d(e,"a",(function(){return l})),s.d(e,"l",(function(){return u})),s.d(e,"g",(function(){return d})),s.d(e,"G",(function(){return m})),s.d(e,"m",(function(){return g})),s.d(e,"d",(function(){return p})),s.d(e,"D",(function(){return f})),s.d(e,"x",(function(){return h})),s.d(e,"y",(function(){return b})),s.d(e,"e",(function(){return y})),s.d(e,"w",(function(){return v})),s.d(e,"p",(function(){return w})),s.d(e,"i",(function(){return C})),s.d(e,"v",(function(){return N})),s.d(e,"c",(function(){return M})),s.d(e,"f",(function(){return T})),s.d(e,"k",(function(){return S})),s.d(e,"B",(function(){return _})),s.d(e,"h",(function(){return x})),s.d(e,"C",(function(){return I})),s.d(e,"j",(function(){return A})),s.d(e,"E",(function(){return k})),s.d(e,"u",(function(){return B})),s.d(e,"A",(function(){return L})),s.d(e,"s",(function(){return O})),s.d(e,"b",(function(){return j})),s.d(e,"q",(function(){return D})),s.d(e,"t",(function(){return q})),s.d(e,"o",(function(){return E})),s.d(e,"z",(function(){return $})),s.d(e,"r",(function(){return z})),s.d(e,"F",(function(){return P}));var a=s("5530"),i=s("b775"),n=s("4328"),r=s.n(n),o={notice:{getAll:"/sysNotice/show",editNotice:"/sysNotice/edit",deletNotice:"/sysNotice/delete",addNotice:"/sysNotice/add",viewNotice:"/sysNotice/view",editView:"sysNotice/editView",downLoad:"sysNotice/download",homeList:"sysNotice/home"},subsystem:{open:"/subsystem/open",selectById:"/subsystem/selectById",update:"/subsystem/update",show:"/subsystem/show",logo:"/subsystem/logo",clearTestData:"/subsystem/clearTestData"},sms:{show:"/system/sms/show",openOrClose:"/system/sms/openOrClose",delete:"/system/sms/delete",selectById:"/system/sms/selectById",add:"/system/sms/add",update:"/system/sms/update"},sysMsg:{sysMsgTemplate:{selectById:"/sysMsgTemplate/selectById",add:"/sysMsgTemplate/add",showList:"/sysMsgTemplate/showList",update:"/sysMsgTemplate/update",delete:"/sysMsgTemplate/delete",createMsg:"/sms-sign-template/create",editMsg:"/sms-sign-template/edit",seeDetail:"/sms-sign-template/detail",deleteMsg:"/sms-sign-template/delete",showMsgList:"/sms-sign-template/show",downloadMsg:"/sms-sign-template/download",startSendBatchSms:"/sms-sign-template/startSendBatchSms"},shortMsg:{list:"/sms-send/list",save:"/sms-send/save",export:"/sms-send/export",saveBatch:"/sms-send/saveBatch",queryMsg:"/sms-send/queryMsg",sendMsg:"/sms-send/reply"}},sysMail:{addTemplate:"/sysMsgTemplate/add",showList:"sysMsgTemplate/showList",searchRecipient:"/sysMails/searchRecipient",selectTemplateById:"/sysMsgTemplate/selectById",saveSendMail:"/sysMails/saveSendMail",queryMailsByMTI:"/sysMails/queryMailsByMTI",view:"/sysMails/view"}};function c(t){return Object(i["b"])({url:o.notice.getAll,method:"get",params:t})}function l(t){return Object(i["b"])({url:o.notice.addNotice,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function u(t){return Object(i["b"])({data:t,url:o.notice.editNotice,method:"post",headers:{"Content-Type":"multipart/form-data"}})}function d(t){return Object(i["b"])({url:o.notice.deletNotice,method:"DELETE",params:{noticeId:t}})}function m(t){return Object(i["b"])({url:o.notice.viewNotice,method:"get",params:{noticeId:t}})}function g(t){return Object(i["b"])({url:o.notice.editView,method:"get",params:{noticeId:t}})}function p(t){var e="",s=t.get("id");return e=s?o.subsystem.update:o.subsystem.open,i["b"].post(e,t,{headers:{"Content-Type":"multipart/form-data"}})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return t||(t={}),i["b"].get(o.subsystem.show,{params:Object(a["a"])({},t,{pageNum:e,pageSize:s})})}function h(t){return i["b"].get(o.subsystem.selectById,{params:{id:t}})}function b(t){return i["b"].get(o.subsystem.logo,{params:{id:t},responseType:"arraybuffer"})}function y(t){return i["b"].get(o.subsystem.clearTestData,{params:{id:t}})}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i["b"].get(o.sms.show,{params:{pageNum:t,pageSize:e}})}function w(t,e){return t instanceof Array||(t=[t]),i["b"].post(o.sms.openOrClose,t,{headers:{"Content-Type":"application/json"},params:{state:e}})}function C(t){return i["b"].post(o.sms.delete,t,{headers:{"Content-Type":"application/json"}})}function N(t){return i["b"].get(o.sms.selectById,{params:{id:t}})}function M(t){var e="";return e=t&&t.id?o.sms.update:o.sms.add,i["b"].post(e,t)}function T(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.createMsg,method:"post",data:r.a.stringify(t)})}function S(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.editMsg,method:"post",data:r.a.stringify(t)})}function _(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.seeDetail,method:"get",params:t})}function x(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.deleteMsg,method:"get",params:t})}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.showMsgList,method:"get",params:{pageNum:t,pageSize:e}})}function A(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.downloadMsg,method:"get",params:t,responseType:"blob"})}function k(t){return Object(i["b"])({url:o.sysMsg.sysMsgTemplate.startSendBatchSms,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return null!==t&&void 0!==t||(t={}),i["b"].get(o.sysMsg.shortMsg.list,{params:Object(a["a"])({},t,{pageNum:e,pageSize:s})})}function L(t){return i["b"].post(o.sysMsg.shortMsg.save,r.a.stringify(t))}function O(t,e){return i["b"].get(o.sysMsg.shortMsg.queryMsg,{params:{receivePhone:t}})}function j(t){var e="";return e=(t&&t.id,o.sysMail.addTemplate),i["b"].post(e,t)}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i["b"].get(o.sysMail.showList,{params:{pageNum:t,pageSize:e,type:200}})}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return i["b"].get(o.sysMail.searchRecipient,{params:{deptName:t,pageNum:e,pageSize:s,chooseId:a}})}function E(t){return i["b"].get(o.sysMail.selectTemplateById,{params:{id:t}})}function $(t,e){return null!==e&&void 0!==e||(e={}),e["Contetnt-type"]="multipart/form-data",i["b"].post(o.sysMail.saveSendMail,t,{})}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return i["b"].get(o.sysMail.queryMailsByMTI,{params:{msgTemplateId:t,pageNum:e,pageSize:s}})}function P(t){return i["b"].get(o.sysMail.view,{params:{mailId:t}})}},aaa9:function(t,e,s){},ac2a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mainContent"},[t._m(0),s("div",{staticClass:"slogan"},[t._v("交通强国 铁路先行")]),s("div",{staticClass:"main clearfix"},[s("div",{staticClass:"notice-card"},[s("div",{staticClass:"title"},[t._v("公告")]),s("div",{staticClass:"content"},[t.noticeList.length>0?s("div",t._l(t.noticeList,(function(e,a){return s("p",{key:a},[s("router-link",{attrs:{to:{path:"/noticeDetail",query:{id:e.id}},target:"_blank"}},[s("a",[s("span",{staticClass:"numflag"},[t._v(t._s(a+1))]),t._v(" "+t._s(e.title)+" ")])])],1)})),0):s("div",{staticClass:"none"},[t._v("暂无公告")])])]),s("a-form",{ref:"formLogin",staticClass:"user-layout-login",staticStyle:{width:"300px"},attrs:{id:"formLogin",form:t.form},on:{submit:t.handleSubmit}},[s("a-tabs",{attrs:{"active-key":t.customActiveKey,"tab-bar-style":{textAlign:"center",borderBottom:"unset"}},on:{change:t.handleTabClick}},[s("a-tab-pane",{key:"tab1",attrs:{tab:"账号密码登录"}},[t.isLoginError?s("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",message:"账户或密码错误"}}):t._e(),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{rules:[{required:!0,message:"请输入帐户名"},{validator:t.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"['loginName', {rules: [{ required: true, message: '请输入帐户名' }, { validator: handleUsernameOrEmail }], validateTrigger: 'change'}\n              ]"}],attrs:{size:"large",type:"text",placeholder:"账户"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkingCode",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"[ 'checkingCode', {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'} ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t.num>1?s("a-row",{attrs:{gutter:16}},[s("a-col",{staticClass:"gutter-row",attrs:{span:16}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['captcha', {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"请输入验证码"}})],1)],1),s("a-col",{staticClass:"gutter-row",attrs:{span:8}},[s("img",{staticStyle:{width:"100%"},attrs:{src:t.captchaImg},on:{click:t.getCaptchaSms}})])],1):t._e()],1),s("a-tab-pane",{key:"tab2",attrs:{tab:"手机号码登录"}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobileNumber",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确手机号码"}],validateTrigger:"blur"}],expression:"['mobileNumber', {rules: [{ required: true, pattern: /^1[34578]\\d{9}$/, message: '请输入正确手机号码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"手机号码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),s("a-row",{attrs:{gutter:16}},[s("a-col",{staticClass:"gutter-row",attrs:{span:16}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkingCode1",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['checkingCode1', {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),s("a-col",{staticClass:"gutter-row",attrs:{span:8}},[s("a-button",{staticClass:"getCaptcha",attrs:{type:"primary",tabindex:"-1",disabled:t.state.smsSendBtn},domProps:{textContent:t._s(t.state.smsSendBtn?t.state.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}}})],1)],1)],1)],1),s("a-form-item",{staticStyle:{"margin-top":"24px"}},[s("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary","html-type":"submit",loading:t.state.loginBtn,disabled:t.state.loginBtn}},[t._v("登录")])],1),s("a-form-item",[s("a",{on:{click:t.forgetPassword}},[t._v("忘记密码")]),s("div",{staticClass:"register",on:{click:t.toReg}},[t._v("单位注册")])])],1)],1),s("a-modal",{attrs:{centered:"centered","mask-closable":!1},on:{cancel:t.handleStepOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v("提示")]),s("template",{slot:"footer"},[s("div",{style:{textAlign:"center"}},[s("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleStepOk}},[t._v("关闭")])],1)]),s("div",{staticClass:"step-form-wrapper",staticStyle:{margin:"0"}},[s("p",[t._v(" 中国国家铁路集团有限公司科技管理信息系统目前已经切换至正式域名， "),s("a",{attrs:{target:"_blank",href:"http://rsd.china-railway.com.cn/"}},[t._v("http://rsd.china-railway.com.cn/")]),t._v("，欢迎登录正式域名。 ")])])],2),s("div",{staticClass:"help-btn",on:{click:t.handleDialog}},[s("a-icon",{staticStyle:{display:"block","font-size":"20px","margin-right":"4px"},attrs:{type:"question-circle"}}),t._m(1)],1),s("dialogModel",{ref:"dialog"})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top"},[s("div",{staticClass:"header"},[s("a",{staticClass:"clearfix",staticStyle:{position:"relative",display:"block",margin:"10px"},attrs:{href:"/"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v("点击"),s("br"),t._v("帮助")])}],n=(s("fb6a"),s("d3b7"),s("ac1f"),s("5319"),s("5530")),r=s("2b0e"),o=s("9fb0"),c=s("ac0d"),l=s("6821"),u=s.n(l),d=s("2f62"),m=s("7ded"),g=s("6c3b"),p={mixins:[c["b"],c["c"]],components:{dialogModel:g["a"]},data:function(){return{noticeList:[],visible:!1,showCard:!0,num:0,customActiveKey:"tab1",loginBtn:!1,loginType:1,isLoginError:!1,captchaImg:"",captchaId:"",form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1}}},computed:Object(n["a"])({},Object(d["d"])({menuList:function(t){return t.permission.routers}})),methods:Object(n["a"])({},Object(d["b"])(["Login","Logout"]),{handleUsernameOrEmail:function(t,e,s){var a=this.state,i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;i.test(e)?a.loginType=0:a.loginType=1,s()},seeMore:function(){this.$message.error("请先登录")},handleTabClick:function(t){this.customActiveKey=t},forgetPassword:function(){this.$notification.info({message:"忘记密码",description:"请联系管理员修改密码"})},handleSubmit:function(t){var e=this;t.preventDefault();var s=this.form.validateFields,a=this.state,i=this.customActiveKey,r=this.Login,o=this,c="tab1"===i?["loginName","checkingCode","captcha"]:["mobileNumber","checkingCode1"];s(c,{force:!0},(function(t,s){if(t)setTimeout((function(){e.state.loginBtn=!1}),2e3);else{e.state.loginBtn=!0;var c=Object(n["a"])({},s);delete c.loginName,c[a.loginType?"loginName":"email"]=s.loginName;var l={};"tab2"===i?l={mobileNumber:c.mobileNumber,checkingCode1:s.checkingCode1,flag:0}:(c.checkingCode=u()(s.checkingCode),l=c,o.num>1&&(l.captcha=s.captcha,l.captchaId=o.captchaId),l.flag=1),r(l,a.loginType).then((function(t){e.loginSuccess(t)})).catch((function(t){return e.requestFailed(t)})).finally((function(){setTimeout((function(){e.state.loginBtn=!1}),2e3)}))}}))},getCaptcha:function(t){var e=this;t.preventDefault();var s=this.form.validateFields,a=this.state;s(["mobileNumber"],{force:!0},(function(t,s){if(!t){a.smsSendBtn=!0;var i=window.setInterval((function(){a.time--<=0&&(a.time=60,a.smsSendBtn=!1,window.clearInterval(i))}),1e3),n=e.$message.loading("验证码发送中..",0);Object(m["h"])(s.mobileNumber).then((function(s){setTimeout(n,3),"0"===s.stateCode&&(clearInterval(i),a.time=60,a.smsSendBtn=!1,e.$notification.error({message:"错误",description:((t.response||{}).data||{}).message||"手机号码未注册",duration:4}))})).catch((function(t){setTimeout(n,1),clearInterval(i),a.time=60,a.smsSendBtn=!1,e.$notification.error({message:"错误",description:((t.response||{}).data||{}).message||"手机号码未注册",duration:4})}))}}))},handleStepOk:function(){this.visible=!1},loginSuccess:function(t){r["a"].ls.set(o["m"],0),this.$route.query.redirect==location.hostname?this.$router.go(-1):this.$router.replace({path:"/"}),this.isLoginError=!1},requestFailed:function(){this.isLoginError=!0},toReg:function(){this.$router.push("/test")},getCaptchaSms:function(){var t=this;Object(m["b"])(this.form.getFieldValue("loginName")).then((function(e){t.captchaImg=e.data.captchaImage,t.captchaId=e.data.captchaId})).catch()},getNotice:function(){var t=this;Object(m["c"])(this.$route.params.unit).then((function(e){e.success&&e.data&&e.data.length>3?t.noticeList=e.data.slice(0,3):t.noticeList=e.data})).catch()},handleDialog:function(){this.$refs.dialog.show()}}),mounted:function(){r["a"].ls.get(o["m"])&&(this.num=r["a"].ls.get(o["m"])),this.getNotice(),this.num>0&&this.getCaptchaSms()},watch:{num:function(t){2===t&&this.getCaptchaSms()}}},f=p,h=(s("5c93"),s("2877")),b=Object(h["a"])(f,a,i,!1,null,"60559baa",null);e["default"]=b.exports},bc70:function(t,e,s){},eedb:function(t,e,s){"use strict";var a=s("aaa9"),i=s.n(a);i.a}}]);