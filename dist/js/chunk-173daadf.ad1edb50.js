(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-173daadf"],{"7a7c":function(t,e,a){},a990:function(t,e,a){"use strict";var i=a("7a7c"),n=a.n(i);n.a},cf7e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SoftwareWorks",attrs:{id:"#tab202"}},[t._m(0),a("a-form-model",{ref:"addForm5",attrs:{model:t.formModel,layout:"inline",rules:t.rulesProp}},[a("a-row",{staticClass:"rowRight"},[1==t.$route.query.source?a("a-col",{attrs:{md:24,sm:24}},[a("a-form-model-item",{attrs:{label:"知识产权来源说明:",prop:"declearunit"}},[a("a-input",{attrs:{type:"textarea",disabled:t.auditflag},model:{value:t.formModel.sourceDescription,callback:function(e){t.$set(t.formModel,"sourceDescription",e)},expression:"formModel.sourceDescription"}})],1)],1):t._e(),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"所涉及技术领域:",prop:"seledata"}},[a("a-select",{attrs:{mode:"multiple",disabled:t.auditflag},model:{value:t.formModel.seledata,callback:function(e){t.$set(t.formModel,"seledata",e)},expression:"formModel.seledata"}},t._l(t.technologylist,(function(e){return a("a-select-option",{key:e.id},[t._v(t._s(e.name))])})),1)],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"申请国家:",prop:"declearunit"}},[a("a-input",{attrs:{disabled:t.auditflag},model:{value:t.formModel.registerCountry,callback:function(e){t.$set(t.formModel,"registerCountry",e)},expression:"formModel.registerCountry"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"技术分支:",prop:"declearunit"}},[a("a-input",{attrs:{disabled:t.auditflag},model:{value:t.formModel.technicalBranch,callback:function(e){t.$set(t.formModel,"technicalBranch",e)},expression:"formModel.technicalBranch"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"运用状态:",prop:"usedState"}},[a("a-select",{attrs:{disabled:t.auditflag},model:{value:t.formModel.usedState,callback:function(e){t.$set(t.formModel,"usedState",e)},expression:"formModel.usedState"}},t._l(t.statuslist,(function(e){return a("a-select-option",{key:e.id},[t._v(t._s(e.name))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-model-item",{attrs:{label:"运用情况:",prop:"declearunit"}},[a("a-input",{attrs:{disabled:t.auditflag},model:{value:t.formModel.usedInfo,callback:function(e){t.$set(t.formModel,"usedInfo",e)},expression:"formModel.usedInfo"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"专利名称:",prop:"declearunit"}},[a("a-input",{attrs:{disabled:t.auditflag},model:{value:t.formModel.registerName,callback:function(e){t.$set(t.formModel,"registerName",e)},expression:"formModel.registerName"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-model-item",{attrs:{label:"专利类型:",prop:"patentType"}},[a("a-select",{attrs:{disabled:t.auditflag},model:{value:t.formModel.patentType,callback:function(e){t.$set(t.formModel,"patentType",e)},expression:"formModel.patentType"}},t._l(t.patentlist,(function(e){return a("a-select-option",{key:e.id},[t._v(t._s(e.name))])})),1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-model-item",{attrs:{label:"申请人(承担单位):",prop:"declearunit"}},[a("div",{staticStyle:{"text-align":"left","margin-bottom":"20px"}},[t.auditflag?t._e():a("a-button",{staticClass:"config-new",attrs:{type:"primary"},on:{click:t.addRest}},[t._v("选择合同(任务书)关联单位")]),t.auditflag?t._e():a("a-button",{staticClass:"config-new",staticStyle:{"margin-left":"20px"},attrs:{icon:"plus"},on:{click:t.addAplBtn}},[t._v("添加其他关联单位")]),a("a-button",{directives:[{name:"debounce",rawName:"v-debounce",value:function(){t.delectmore()},expression:"()=>{delectmore()}"},{name:"show",rawName:"v-show",value:!t.auditflag,expression:"!auditflag"}],staticClass:"config-new",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[t._v("批量删除")])],1)]),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,rowClassName:t.rowClassName,"row-selection":t.rowSelection},scopedSlots:t._u([t.auditflag?null:{key:"action",fn:function(e){return[a("a",{directives:[{name:"debounce",rawName:"v-debounce",value:function(){t.delectunit(e)},expression:"()=>{delectunit(record)}"}],staticClass:"adanger"},[t._v("删除")]),"1"==e.unitSource?a("a",{staticStyle:{"margin-left":"20px"},on:{click:function(a){return t.relatedselectstuff(e,"unit")}}},[t._v("选择证明材料")]):t._e()]}}],null,!0)}),a("a-table",{attrs:{columns:t.bancolumns,"data-source":t.bandata,rowClassName:t.rowClassName}})],1),a("a-col",{attrs:{md:24,sm:24}},[a("a-form-model-item",{attrs:{label:"变更内容说明:",prop:"declearunit"}},[a("a-input",{attrs:{disabled:t.auditflag},model:{value:t.formModel.changeDescription,callback:function(e){t.$set(t.formModel,"changeDescription",e)},expression:"formModel.changeDescription"}})],1)],1),a("Addunit",{ref:"Addunit",on:{getaddunitdata:t.getaddunitdata}}),a("SelectUnit",{ref:"SelectUnit",attrs:{id:t.formModel.contractNo,deleunit:t.deleunit},on:{getunitdata:t.getunitdata}}),a("selectstuff",{ref:"selectstuff",on:{checkOrganization:t.checkOrganization,uploadfile:t.uploadfile}})],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blueTitle"},[a("span",[t._v("软件著作信息")])])}],l=(a("99af"),a("4de4"),a("4160"),a("caad"),a("d81d"),a("a434"),a("b0c0"),a("ac1f"),a("2532"),a("1276"),a("159b"),a("3efc")),d=a("a562"),s=a("d5ff"),o=a("0974"),r={components:{Addunit:l["a"],SelectUnit:d["a"],selectstuff:s["a"]},props:{formModel:{type:Object},queryid:{type:String},auditflag:{type:Boolean},rulesProp:{type:Object}},data:function(){return{technologylist:[{name:"高速",id:"1"},{name:"普速",id:"2"},{name:"重载",id:"3"},{name:"其他",id:"4"}],statuslist:[{name:"未运用",id:"1"},{name:"已运用",id:"2"}],patentlist:[{name:"发明",id:"1"},{name:"实用类型",id:"2"},{name:"外观设计",id:"3"}],seledata:[],columns:[{title:"序号",dataIndex:"orderNumber",align:"center",width:100,customRender:function(t,e,a){return a+1}},{title:"单位名称",dataIndex:"unitName",align:"center",ellipsis:!0,width:160},{title:"来源",dataIndex:"unitSource",align:"center",width:160,customRender:function(t){return"0"===t?"课题":"1"===t?"非课题":""}},{title:"证明材料",dataIndex:"relatedDocumentName",align:"center",ellipsis:!0,width:160},{title:"操作",align:"center",width:160,scopedSlots:{customRender:"action"}}],bancolumns:[{title:"序号",dataIndex:"orderNumber",align:"center",width:100,customRender:function(t,e,a){return a+1}},{title:"单位名称",dataIndex:"unitName",align:"center",ellipsis:!0,width:160},{title:"来源",dataIndex:"unitSource",align:"center",width:160,customRender:function(t){return"0"===t?"课题":"1"===t?"非课题":""}},{title:"证明材料",dataIndex:"relatedDocumentName",align:"center",ellipsis:!0,width:160}],data:[],bandata:[],pdfFile:"",formModalEdit:{annexName:""},selectunitdata:[],addunitdata:[],unitlist:[],deleunit:[],selectedRowKeys:[]}},computed:{rowSelection:function(){var t=this.selectedRowKeys;return{selectedRowKeys:t,onChange:this.onSelectChange}}},watch:{formModel:{handler:function(t,e){t.technicalField&&(this.formModel.seledata=t.technicalField.split(","))},deep:!0},selectunitdata:{handler:function(t,e){t&&(this.data=t.concat(this.addunitdata,this.unitlist))},deep:!0},addunitdata:{handler:function(t,e){t&&(this.data=t.concat(this.selectunitdata,this.unitlist))},deep:!0},unitlist:{handler:function(t,e){t&&(this.data=t.concat(this.selectunitdata,this.addunitdata))},deep:!0},data:function(t){t&&this.$emit("getapplicant",t)},queryid:function(t){t&&this.getdatalist(t)}},mounted:function(){var t=this;this.$route.query.id&&this.$nextTick((function(){t.getdatalist(t.$route.query.id)}))},methods:{onSelectChange:function(t,e){var a=this;this.delemorelist=[],this.selectedRowKeys=t,e.forEach((function(t){a.delemorelist.push(t)}))},delectmore:function(){var t=this;if(0==this.delemorelist.length)this.$message.error("请勾选数据");else{this.deleunit=[];var e=this.delemorelist.map((function(t){return t.uuid}));this.addunitdata=this.addunitdata.filter((function(t){return!e.includes(t.uuid)})),this.selectunitdata=this.selectunitdata.filter((function(t){return!e.includes(t.uuid)}));var a=this.delemorelist.map((function(t){return t.id}));this.unitlist=this.unitlist.filter((function(t){return!a.includes(t.id)})),this.delemorelist.forEach((function(e){"0"==e.unitSource&&t.deleunit.push(e)})),this.selectedRowKeys=[],this.$forceUpdate()}},rowClassName:function(t,e){var a="black";return"1"==t.unitSource&&(a="red"),a},getdatalist:function(t){var e=this,a={intellectualId:t,pageSize:10,pageNum:1};Object(o["m"])(a).then((function(t){t.success&&(e.unitlist=t.data.records,e.bandata=JSON.parse(JSON.stringify(t.data.records)))}))},addAplBtn:function(){this.$refs.Addunit.show()},addRest:function(){""!=this.formModel.contractNo?this.$refs.SelectUnit.show():this.$message.info("当前没有合同(任务书)单位可选择,请手动添加")},getunitdata:function(t){this.selectunitdata=t},getaddunitdata:function(t){this.addunitdata.push(t[0])},delectunit:function(t){var e=this;this.deleunit=[],this.addunitdata.forEach((function(a,i){a.uuid==t.uuid&&e.addunitdata.splice(i,1)})),this.selectunitdata.forEach((function(a,i){a.uuid==t.uuid&&e.selectunitdata.splice(i,1)})),this.unitlist.forEach((function(a,i){a.id==t.id&&e.unitlist.splice(i,1)})),"0"==t.unitSource&&this.deleunit.push(t)},onBeforeUpload:function(t){return this.pdfFile=t,this.formModalEdit=Object.assign({},this.formModalEdit,{annexName:t.name}),!1},uploadfile:function(t){this.$emit("uploadfile",t)},relatedselectstuff:function(t,e){this.text=e,t.uuid?this.ids=t.uuid:this.ids=t.id,this.$refs.selectstuff.visible=!0},checkOrganization:function(t){var e=this;"unit"==this.text?this.data.forEach((function(a){a.uuid!=e.ids&&a.id!=e.ids||(a.relatedDocumentId=t[0].id,a.relatedDocumentName=t[0].fieldValue,a.relatedDocumentUrl=t[0].fieldUrl,e.$forceUpdate())})):this.twodata.forEach((function(a){a.uuid!=e.ids&&a.id!=e.ids||(a.relatedDocumentId=t[0].id,a.relatedDocumentName=t[0].fieldValue,a.relatedDocumentUrl=t[0].fieldUrl,e.$forceUpdate())}))}}},u=r,c=(a("a990"),a("2877")),f=Object(c["a"])(u,i,n,!1,null,"5534fa82",null);e["default"]=f.exports}}]);