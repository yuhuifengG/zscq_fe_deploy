(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc6af"],{"4e9a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"content",style:{height:"100%"},attrs:{bordered:!1}},[a("a-button",{directives:[{name:"action",rawName:"v-action:menu_create",arg:"menu_create"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAddmenu(1)}}},[e._v("新增菜单")]),a("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id"},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},[r.parentId?e._e():a("span",[a("a",{directives:[{name:"action",rawName:"v-action:menu_add",arg:"menu_add"}],on:{click:function(t){return e.handleAddmenu(r)}}},[e._v("添加")]),a("a-divider",{attrs:{type:"vertical"}})],1),a("a",{directives:[{name:"action",rawName:"v-action:menu_de",arg:"menu_de"}],on:{click:function(t){return e.handleEditMenu(r)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"debounce",rawName:"v-debounce",value:function(){e.handleDeleteMenu(r)},expression:"()=>{handleDeleteMenu(record)}"},{name:"action",rawName:"v-action:menu_de",arg:"menu_de"}],staticClass:"adanger"},[e._v("删除")])],1)}}])}),a("a-modal",{attrs:{centered:"centered","mask-closable":!1,okText:"确认",cancelText:"取消",confirmLoading:e.confirmLoading},on:{ok:e.menAction},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.titeBar)+"菜单")]),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{colon:!1,form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{lg:12,md:12,sm:24}},[a("a-form-item",{attrs:{label:"菜单名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入菜单名称",whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: '请输入菜单名称', whitespace: true}]}]"}],attrs:{placeholder:"请输入菜单名称",disabled:"编辑"===e.titeBar}})],1)],1),a("a-col",{attrs:{lg:12,md:12,sm:24}},[a("a-form-item",{attrs:{label:"菜单路径"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"请输入菜单名称",whitespace:!0}]}],expression:"['url', {rules: [{ required: true, message: '请输入菜单名称', whitespace: true}]}]"}],attrs:{placeholder:"请输入菜单名称"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{lg:12,md:12,sm:24}},[a("a-form-item",{attrs:{label:"菜单排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sortCode",{rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sortCode', {rules: [{ required: true, message: '请输入排序值'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序值"}})],1)],1),a("a-col",{attrs:{md:12}},[a("a-form-item",{attrs:{label:"授权标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["auth",{rules:[{required:!0,message:"请输入授权表示",whitespace:!0}]}],expression:"['auth', {rules: [{ required: true, message: '请输入授权表示', whitespace: true}]}]"}],attrs:{placeholder:"请输入菜单名称"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{lg:12,md:12,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isShow",{rules:[{required:!0,message:"请选择状态"}]}],expression:"['isShow', {rules: [{ required: true, message: '请选择状态'}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("显示")]),a("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1)],1)],1),a("a-col",{attrs:{lg:12,md:12,sm:24}},[a("a-form-item",{attrs:{label:"模块"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["moudleId",{rules:[{required:!0,message:"该项为必填项"}]}],expression:"['moudleId', { rules: [\n                  {required: true, message: '该项为必填项'}\n                ]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择模块"}},[a("a-select-option",{attrs:{value:"other"}},[e._v("其他")]),a("a-select-option",{attrs:{value:"apply"}},[e._v("立项")]),a("a-select-option",{attrs:{value:"contract"}},[e._v("合同")]),a("a-select-option",{attrs:{value:"process"}},[e._v("实施")]),a("a-select-option",{attrs:{value:"alter"}},[e._v("变更")]),a("a-select-option",{attrs:{value:"acceptance"}},[e._v("验收")])],1)],1)],1)],1),a("a-row",[a("a-col",[a("a-form-item",{attrs:{label:"菜单显示类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["elementType",{rules:[{required:!0,message:"菜单显示类型"}]}],expression:"['elementType', {rules: [{ required: true, message: '菜单显示类型'}]}]"}]},[a("a-radio",{attrs:{value:"0"}},[e._v("普通")]),a("a-radio",{attrs:{value:"1"}},[e._v("使用工作流")]),a("a-radio",{attrs:{value:"2"}},[e._v("不使用工作流")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-form-item",{attrs:{label:"菜单图标"}},[a("icon-selector",{on:{change:e.handleIconChange},model:{value:e.icon,callback:function(t){e.icon=t},expression:"icon"}})],1)],1)],1)],1)],1)],1)},n=[],i=a("8593"),o=a("13bb"),s=a("c1df"),c=a.n(s),l=[{title:"序号",width:"80px",align:"center",customRender:function(e,t,a){if(null==t.parentId)return a+1}},{title:"菜单名称",dataIndex:"name",width:"120px",align:"center",key:"name"},{title:"排序",dataIndex:"sortCode",align:"center",width:"80px",key:"sortCode"},{title:"请求地址",dataIndex:"url",width:"120px",key:"url"},{title:"父级菜单",dataIndex:"fatherurl",width:"120px",key:"fatherurl"},{title:"权限标识",dataIndex:"auth",width:"80px",key:"auth"},{title:"状态",dataIndex:"isShow",width:"80px",key:"isShow",align:"center",customRender:function(e){return 1==e?"显示":"隐藏"}},{title:"创建时间",dataIndex:"createdTime",width:"120px",align:"center",key:"createdTime",customRender:function(e){return c()(e).format("YYYY-MM-DD")}},{title:"操作",width:"240px",align:"center",scopedSlots:{customRender:"action"}}],d=[],u={onChange:function(e,t){},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},m={components:{IconSelector:o["a"]},name:"MenuList",data:function(){return{data:d,columns:l,confirmLoading:!1,rowSelection:u,visible:!1,titeBar:"",form:this.$form.createForm(this,{}),row:"",icon:"",actionFlag:1,elementType:"0"}},methods:{handleIconChange:function(e){this.icon=e},handleAddmenu:function(e){this.confirmLoading=!0,this.titeBar="添加",this.actionFlag=1,this.row=1!==e?e:"",this.form.resetFields(),this.visible=!0,this.confirmLoading=!1},handleEditMenu:function(e){var t=this;this.visible=!0,this.titeBar="编辑",this.row=e,this.actionFlag=2,this.confirmLoading=!0,e.isShow=parseInt(e.isShow),setTimeout((function(){t.form.setFieldsValue(e),t.confirmLoading=!1,t.icon=e.icon}),1e3)},handleDeleteMenu:function(e){var t=this;this.$confirm({title:"警告?",content:"是否删除该菜单",onOk:function(){Object(i["t"])(e.id).then((function(e){t.getMenu(),t.$notification["warning"]({message:"成功",description:"删除成功",duration:4})})).catch((function(e){}))},onCancel:function(){}})},menAction:function(e){var t=this,a=this.form.validateFields;a((function(e,a){e||(a.icon=t.icon,1==t.actionFlag?(t.row.id&&(a.parentId=t.row.id),Object(i["e"])(a).then((function(e){e.success?(t.$notification["success"]({message:"添加成功",duration:4}),t.icon="",t.getMenu()):t.$notification["error"]({message:((err.response||{}).data||{}).message||"添加失败",duration:4})})).catch((function(e){}))):(a.id=t.row.id,Object(i["tb"])(a).then((function(e){e.success?(t.$notification["success"]({message:e.msg||"修改成功",duration:4}),t.icon="",t.getMenu()):t.$notification["error"]({message:e.msg||"修改错误",duration:4})})).catch((function(e){}))),t.visible=!1)}))},getMenu:function(){var e=this;Object(i["M"])(!0).then((function(t){if(t.success&&t.data.length>0){for(var a=0;a<t.data.length;a++)if(null==t.data[a].subMenus)delete t.data[a].subMenus;else if(t.data[a].subMenus.length>0){t.data[a].children=t.data[a].subMenus;for(var r=0;r<t.data[a].children.length;r++)t.data[a].children[r].fatherurl=t.data[a].url;t.data[a].fatherurl="/",delete t.data[a].subMenus}e.data=t.data}else e.$notification.warning({message:"提示",description:"暂无访问权限"}),e.$router.push({path:"/403"})})).catch((function(t){e.data=[],e.$notification["error"]({message:"错误",description:((t.response||{}).data||{}).message||"渲染失败",duration:4})}))}},mounted:function(){this.getMenu()}},h=m,f=a("2877"),v=Object(f["a"])(h,r,n,!1,null,null,null);t["default"]=v.exports}}]);